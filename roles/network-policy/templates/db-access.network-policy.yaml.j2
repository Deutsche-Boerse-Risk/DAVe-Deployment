kind: NetworkPolicy
apiVersion: extensions/v1beta1
metadata:
  name: mongo-access
  namespace: {{ namespace }}
spec:
  podSelector:
    matchLabels:
      app: mongo
      layer: db
      project: dave
  ingress:
    - from:
      - podSelector:
          matchLabels:
            app: mongo
            layer: db
            project: dave
      - podSelector:
          matchLabels:
            app: dave
            layer: api
            project: dave
